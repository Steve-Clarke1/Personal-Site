---
title: Covid's Impact on UK Crime
author: Steve Clarke
date: '2021-05-22'
slug: covid-s-impact-on-uk-crime
categories:
  - R
tags:
  - R Markdown
output:
  html_document:
    code_folding: hide
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>
<script src="{{< blogdown/postref >}}index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index_files/plotly-binding/plotly.js"></script>
<script src="{{< blogdown/postref >}}index_files/typedarray/typedarray.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/jquery/jquery.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/plotly-main/plotly-latest.min.js"></script>


<pre class="r"><code>files &lt;- list.files(path = &quot;C:\\Users\\humbu_000\\Downloads\\Crime Data&quot;, include.dirs = TRUE, full.names = TRUE, recursive = TRUE, pattern=&quot;*.csv&quot;, ignore.case = TRUE)

crime_data &lt;- map_dfr(.x = files, .f = read_csv, col_types = c(&quot;_c_cddc__cc_&quot;), progress = FALSE)</code></pre>
<div id="burglary-robbery-and-shoplifting" class="section level1">
<h1>Burglary, Robbery and Shoplifting</h1>
<p>Blah Blah Blah</p>
<div id="number-of-crimes" class="section level2">
<h2>Number of Crimes</h2>
<pre class="r"><code>crime_data %&gt;% 
  filter(`Crime type` %in% c(&quot;Burglary&quot;, &quot;Robbery&quot;, &quot;Shoplifting&quot;)) %&gt;%
  group_by(Month, `Crime type`) %&gt;% 
  summarise(NumCrimes = n()) %&gt;% 
  ungroup() %&gt;%
  mutate(Month = ymd(paste0(Month, &quot;-01&quot;))) %&gt;% 
  plot_ly(x = ~Month, y = ~NumCrimes, color = ~`Crime type`, type = &quot;scatter&quot;, mode = &quot;lines&quot;, line = list(shape = &quot;hv&quot;)) %&gt;%
  layout(shapes = list(vseg(ymd(&quot;2020-03-23&quot;), ymd(&quot;2020-05-30&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-05-30&quot;), ymd(&quot;2020-06-15&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-06-15&quot;), ymd(&quot;2020-07-04&quot;), &quot;#FFE7A2&quot;),
                       vseg(ymd(&quot;2020-09-14&quot;), ymd(&quot;2020-11-05&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-11-05&quot;), ymd(&quot;2020-12-02&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-12-02&quot;), ymd(&quot;2021-01-06&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2021-01-06&quot;), ymd(&quot;2021-03-08&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2021-03-08&quot;), ymd(&quot;2021-04-01&quot;), &quot;#FFC1A2&quot;)), 
         yaxis = list(tickformat = &quot;%&quot;, showgrid = F), 
         xaxis = list(showgrid = F))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;Month&#39;. You can override using the `.groups` argument.</code></pre>
<div id="htmlwidget-1" style="width:864px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"visdat":{"1a302cb83c3c":["function () ","plotlyVisDat"]},"cur_data":"1a302cb83c3c","attrs":{"1a302cb83c3c":{"x":{},"y":{},"mode":"lines","line":{"shape":"hv"},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"shapes":[{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-03-23","x1":"2020-05-30","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-05-30","x1":"2020-06-15","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-06-15","x1":"2020-07-04","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFE7A2","line":{"color":"#FFE7A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-09-14","x1":"2020-11-05","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-11-05","x1":"2020-12-02","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-12-02","x1":"2021-01-06","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-01-06","x1":"2021-03-08","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-03-08","x1":"2021-04-01","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"}],"yaxis":{"domain":[0,1],"automargin":true,"tickformat":"%","showgrid":false,"title":"NumCrimes"},"xaxis":{"domain":[0,1],"automargin":true,"showgrid":false,"title":"Month"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[34075,34794,33504,34577,35877,34478,37885,39315,36522,37334,32908,35915,32699,32447,31384,29887,29440,29215,31572,31616,30270,32374,29129,26188,19390,18918,20103,22165,22404,22457,24223,23627,20893,19539,18038,19804],"mode":"lines","line":{"color":"rgba(102,194,165,1)","shape":"hv"},"type":"scatter","name":"Burglary","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[6400,6656,6972,7231,6794,6946,7525,7657,7213,7216,7277,7929,7643,7639,7186,7065,6558,6874,7545,7364,6853,7027,6699,5781,2982,3671,4402,5405,5818,5757,5652,5221,4671,3789,3634,4187],"mode":"lines","line":{"color":"rgba(252,141,98,1)","shape":"hv"},"type":"scatter","name":"Robbery","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[33647,34394,31851,31499,32376,30154,32624,31577,26726,30544,29928,33469,31038,32349,30275,29570,29706,28188,29763,29062,25512,28596,29586,22799,12679,14256,16435,20806,21150,21746,22486,19837,17551,16069,16540,19166],"mode":"lines","line":{"color":"rgba(141,160,203,1)","shape":"hv"},"type":"scatter","name":"Shoplifting","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="year-on-year-percentage-change" class="section level2">
<h2>Year on Year Percentage Change</h2>
<pre class="r"><code>crime_data %&gt;% 
  filter(`Crime type` %in% c(&quot;Burglary&quot;, &quot;Robbery&quot;, &quot;Shoplifting&quot;)) %&gt;%
  group_by(Month, `Crime type`) %&gt;% 
  summarise(NumCrimes = n()) %&gt;% 
  ungroup() %&gt;%
  mutate(Month = ymd(paste0(Month, &quot;-01&quot;)), 
         LastYear = Month-years(1)) %&gt;% 
  left_join(x = ., y = ., 
            by = c(&quot;LastYear&quot; = &quot;Month&quot;, &quot;Crime type&quot; = &quot;Crime type&quot;)) %&gt;%
  filter(!is.na(NumCrimes.y)) %&gt;%
  select(Month, CrimeType = `Crime type`, NumCrimes = NumCrimes.x, LastYearNumCrimes = NumCrimes.y) %&gt;%
  mutate(YearOnYearDiff = NumCrimes-LastYearNumCrimes, 
         YearOnYearDiffPcnt = YearOnYearDiff/LastYearNumCrimes) %&gt;%
  plot_ly(x = ~Month, y = ~YearOnYearDiffPcnt, color = ~CrimeType, type = &quot;scatter&quot;, mode = &quot;lines&quot;, line = list(shape = &quot;hv&quot;)) %&gt;%
  layout(shapes = list(vseg(ymd(&quot;2020-03-23&quot;), ymd(&quot;2020-05-30&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-05-30&quot;), ymd(&quot;2020-06-15&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-06-15&quot;), ymd(&quot;2020-07-04&quot;), &quot;#FFE7A2&quot;),
                       vseg(ymd(&quot;2020-09-14&quot;), ymd(&quot;2020-11-05&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-11-05&quot;), ymd(&quot;2020-12-02&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-12-02&quot;), ymd(&quot;2021-01-06&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2021-01-06&quot;), ymd(&quot;2021-03-08&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2021-03-08&quot;), ymd(&quot;2021-04-01&quot;), &quot;#FFC1A2&quot;)), 
         yaxis = list(tickformat = &quot;%&quot;, showgrid = F), 
         xaxis = list(showgrid = F))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;Month&#39;. You can override using the `.groups` argument.</code></pre>
<div id="htmlwidget-2" style="width:864px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"visdat":{"1a30407060b3":["function () ","plotlyVisDat"]},"cur_data":"1a30407060b3","attrs":{"1a30407060b3":{"x":{},"y":{},"mode":"lines","line":{"shape":"hv"},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"shapes":[{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-03-23","x1":"2020-05-30","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-05-30","x1":"2020-06-15","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-06-15","x1":"2020-07-04","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFE7A2","line":{"color":"#FFE7A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-09-14","x1":"2020-11-05","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-11-05","x1":"2020-12-02","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-12-02","x1":"2021-01-06","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-01-06","x1":"2021-03-08","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-03-08","x1":"2021-04-01","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"}],"yaxis":{"domain":[0,1],"automargin":true,"tickformat":"%","showgrid":false,"title":"YearOnYearDiffPcnt"},"xaxis":{"domain":[0,1],"automargin":true,"showgrid":false,"title":"Month"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[-0.0403815113719736,-0.0674541587630051,-0.0632760267430754,-0.135639297799115,-0.179418568999638,-0.15264806543303,-0.166635871717038,-0.195828564161262,-0.171184491539346,-0.132854770450528,-0.114835298407682,-0.270833913406655,-0.407015505061317,-0.416956883533146,-0.359450675503441,-0.258373205741627,-0.238994565217391,-0.231319527639911,-0.232769542632713,-0.252688512145749,-0.309778658738024,-0.396460122320381,-0.380754574479041,-0.243775775164197],"mode":"lines","line":{"color":"rgba(102,194,165,1)","shape":"hv"},"type":"scatter","name":"Burglary","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[0.19421875,0.147686298076923,0.0306942053930006,-0.0229567141474208,-0.0347365322343244,-0.0103656780881083,0.0026578073089701,-0.038265639284315,-0.0499098849299875,-0.0261917960088692,-0.0794283358526865,-0.270904275444571,-0.609839068428627,-0.519439717240477,-0.387419983300863,-0.234961075725407,-0.112839280268375,-0.162496363107361,-0.250894632206759,-0.291010320478001,-0.318400700423172,-0.460794079977231,-0.457530974772354,-0.275730842414807],"mode":"lines","line":{"color":"rgba(252,141,98,1)","shape":"hv"},"type":"scatter","name":"Robbery","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01"],"y":[-0.0775403453502541,-0.0594580450078502,-0.0494803930802801,-0.0612400393663291,-0.082468495181616,-0.0651986469456789,-0.0876961745953899,-0.079646578205656,-0.0454239317518521,-0.0637768465165008,-0.0114274258219727,-0.3188024739311,-0.591500741027128,-0.559306315496615,-0.457142857142857,-0.296381467703754,-0.288022621692587,-0.228536966084859,-0.244498202466149,-0.317424815910811,-0.312049231734086,-0.438068261295286,-0.44095180152775,-0.15934909425852],"mode":"lines","line":{"color":"rgba(141,160,203,1)","shape":"hv"},"type":"scatter","name":"Shoplifting","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>crime_data %&gt;% 
  filter(`Crime type` %in% c(&quot;Burglary&quot;, &quot;Robbery&quot;, &quot;Shoplifting&quot;)) %&gt;%
  group_by(Month, `Crime type`) %&gt;% 
  summarise(NumCrimes = n()) %&gt;% 
  ungroup() %&gt;%
  mutate(Month = ymd(paste0(Month, &quot;-15&quot;)), LastYear = Month-years(1)) %&gt;% 
  left_join(x = ., y = ., by = c(&quot;LastYear&quot; = &quot;Month&quot;, &quot;Crime type&quot; = &quot;Crime type&quot;)) %&gt;%
  filter(!is.na(NumCrimes.y)) %&gt;%
  select(Month, CrimeType = `Crime type`, NumCrimes = NumCrimes.x, LastYearNumCrimes = NumCrimes.y) %&gt;%
  mutate(YearOnYearDiff = NumCrimes-LastYearNumCrimes, YearOnYearDiffPcnt = YearOnYearDiff/LastYearNumCrimes) %&gt;%
  plot_ly(x = ~Month, y = ~YearOnYearDiffPcnt, color = ~CrimeType, type = &quot;scatter&quot;, mode = &quot;lines&quot;, line = list(shape = &quot;spline&quot;)) %&gt;%
  layout(shapes = list(vseg(ymd(&quot;2020-03-23&quot;), ymd(&quot;2020-05-30&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-05-30&quot;), ymd(&quot;2020-06-15&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-06-15&quot;), ymd(&quot;2020-07-04&quot;), &quot;#FFE7A2&quot;),
                       vseg(ymd(&quot;2020-09-14&quot;), ymd(&quot;2020-11-05&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2020-11-05&quot;), ymd(&quot;2020-12-02&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2020-12-02&quot;), ymd(&quot;2021-01-06&quot;), &quot;#FFC1A2&quot;),
                       vseg(ymd(&quot;2021-01-06&quot;), ymd(&quot;2021-03-08&quot;), &quot;#FFA2A2&quot;),
                       vseg(ymd(&quot;2021-03-08&quot;), ymd(&quot;2021-04-01&quot;), &quot;#FFC1A2&quot;)), 
         yaxis = list(tickformat = &quot;%&quot;, showgrid = F), 
         xaxis = list(showgrid = F))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;Month&#39;. You can override using the `.groups` argument.</code></pre>
<div id="htmlwidget-3" style="width:864px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"visdat":{"1a30573e6562":["function () ","plotlyVisDat"]},"cur_data":"1a30573e6562","attrs":{"1a30573e6562":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline"},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"shapes":[{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-03-23","x1":"2020-05-30","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-05-30","x1":"2020-06-15","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-06-15","x1":"2020-07-04","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFE7A2","line":{"color":"#FFE7A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-09-14","x1":"2020-11-05","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-11-05","x1":"2020-12-02","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2020-12-02","x1":"2021-01-06","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-01-06","x1":"2021-03-08","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFA2A2","line":{"color":"#FFA2A2"},"layer":"below"},{"type":["function (xleft, ybottom, xright, ytop, density = NULL, angle = 45, ","    col = NA, border = NULL, lty = par(\"lty\"), lwd = par(\"lwd\"), ","    ...) ","{","    if (is.numeric(density) && all(is.na(density) | density < ","        0)) ","        density <- NULL","    if (!is.null(density) && !is.null(angle)) {","        if (is.logical(border) && !is.na(border)) {","            if (border) ","                border <- col","            else border <- NA","        }","        n <- range(length(xleft), length(xright), length(ybottom), ","            length(ytop))","        if (n[1L] == 0) ","            stop(\"invalid rectangle specification\")","        n <- n[2L]","        x <- rbind(rep.int(NA, n), xleft, xright, xright, xleft)[-1L]","        y <- rbind(rep.int(NA, n), ybottom, ybottom, ytop, ytop)[-1L]","        polygon(x, y, col = col, border = border, lty = lty, ","            lwd = lwd, density = density, angle = angle, ...)","    }","    else .External.graphics(C_rect, as.double(xleft), as.double(ybottom), ","        as.double(xright), as.double(ytop), col = col, border = border, ","        lty = lty, lwd = lwd, ...)","    invisible()","}"],"x0":"2021-03-08","x1":"2021-04-01","y0":0,"y1":1,"yref":"paper","fillcolor":"#FFC1A2","line":{"color":"#FFC1A2"},"layer":"below"}],"yaxis":{"domain":[0,1],"automargin":true,"tickformat":"%","showgrid":false,"title":"YearOnYearDiffPcnt"},"xaxis":{"domain":[0,1],"automargin":true,"showgrid":false,"title":"Month"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["2019-04-15","2019-05-15","2019-06-15","2019-07-15","2019-08-15","2019-09-15","2019-10-15","2019-11-15","2019-12-15","2020-01-15","2020-02-15","2020-03-15","2020-04-15","2020-05-15","2020-06-15","2020-07-15","2020-08-15","2020-09-15","2020-10-15","2020-11-15","2020-12-15","2021-01-15","2021-02-15","2021-03-15"],"y":[-0.0403815113719736,-0.0674541587630051,-0.0632760267430754,-0.135639297799115,-0.179418568999638,-0.15264806543303,-0.166635871717038,-0.195828564161262,-0.171184491539346,-0.132854770450528,-0.114835298407682,-0.270833913406655,-0.407015505061317,-0.416956883533146,-0.359450675503441,-0.258373205741627,-0.238994565217391,-0.231319527639911,-0.232769542632713,-0.252688512145749,-0.309778658738024,-0.396460122320381,-0.380754574479041,-0.243775775164197],"mode":"lines","line":{"color":"rgba(102,194,165,1)","shape":"spline"},"type":"scatter","name":"Burglary","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019-04-15","2019-05-15","2019-06-15","2019-07-15","2019-08-15","2019-09-15","2019-10-15","2019-11-15","2019-12-15","2020-01-15","2020-02-15","2020-03-15","2020-04-15","2020-05-15","2020-06-15","2020-07-15","2020-08-15","2020-09-15","2020-10-15","2020-11-15","2020-12-15","2021-01-15","2021-02-15","2021-03-15"],"y":[0.19421875,0.147686298076923,0.0306942053930006,-0.0229567141474208,-0.0347365322343244,-0.0103656780881083,0.0026578073089701,-0.038265639284315,-0.0499098849299875,-0.0261917960088692,-0.0794283358526865,-0.270904275444571,-0.609839068428627,-0.519439717240477,-0.387419983300863,-0.234961075725407,-0.112839280268375,-0.162496363107361,-0.250894632206759,-0.291010320478001,-0.318400700423172,-0.460794079977231,-0.457530974772354,-0.275730842414807],"mode":"lines","line":{"color":"rgba(252,141,98,1)","shape":"spline"},"type":"scatter","name":"Robbery","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019-04-15","2019-05-15","2019-06-15","2019-07-15","2019-08-15","2019-09-15","2019-10-15","2019-11-15","2019-12-15","2020-01-15","2020-02-15","2020-03-15","2020-04-15","2020-05-15","2020-06-15","2020-07-15","2020-08-15","2020-09-15","2020-10-15","2020-11-15","2020-12-15","2021-01-15","2021-02-15","2021-03-15"],"y":[-0.0775403453502541,-0.0594580450078502,-0.0494803930802801,-0.0612400393663291,-0.082468495181616,-0.0651986469456789,-0.0876961745953899,-0.079646578205656,-0.0454239317518521,-0.0637768465165008,-0.0114274258219727,-0.3188024739311,-0.591500741027128,-0.559306315496615,-0.457142857142857,-0.296381467703754,-0.288022621692587,-0.228536966084859,-0.244498202466149,-0.317424815910811,-0.312049231734086,-0.438068261295286,-0.44095180152775,-0.15934909425852],"mode":"lines","line":{"color":"rgba(141,160,203,1)","shape":"spline"},"type":"scatter","name":"Shoplifting","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
